<!DOCTYPE html>
<html lang="" xml:lang="">
  <head>
    <title>Emory COVID-19 Response Collaborative</title>
    <meta charset="utf-8" />
    <meta name="author" content="EpiRhandbook Team      epiRhandbook     epirhandbook@gmail.com" />
    <script src="libs/header-attrs/header-attrs.js"></script>
    <script src="libs/htmlwidgets/htmlwidgets.js"></script>
    <script src="libs/jquery/jquery.min.js"></script>
    <link href="libs/datatables-css/datatables-crosstalk.css" rel="stylesheet" />
    <script src="libs/datatables-binding/datatables.js"></script>
    <link href="libs/dt-core/css/jquery.dataTables.min.css" rel="stylesheet" />
    <link href="libs/dt-core/css/jquery.dataTables.extra.css" rel="stylesheet" />
    <script src="libs/dt-core/js/jquery.dataTables.min.js"></script>
    <link href="libs/crosstalk/css/crosstalk.css" rel="stylesheet" />
    <script src="libs/crosstalk/js/crosstalk.min.js"></script>
    <link href="libs/tabwid/tabwid.css" rel="stylesheet" />
    <link rel="stylesheet" href="xaringan-themer.css" type="text/css" />
  </head>
  <body>
    <textarea id="source">
class: center, middle, inverse, title-slide

# Emory COVID-19 Response Collaborative
## Data visualization with ggplot2: an overview and demonstration
### <a href="https:://epirhandbook.com">EpiRhandbook Team</a> <br><br> <svg viewBox="0 0 512 512" style="height:1em;position:relative;display:inline-block;top:.1em;fill:white;" xmlns="http://www.w3.org/2000/svg"> <path d="M459.37 151.716c.325 4.548.325 9.097.325 13.645 0 138.72-105.583 298.558-298.558 298.558-59.452 0-114.68-17.219-161.137-47.106 8.447.974 16.568 1.299 25.34 1.299 49.055 0 94.213-16.568 130.274-44.832-46.132-.975-84.792-31.188-98.112-72.772 6.498.974 12.995 1.624 19.818 1.624 9.421 0 18.843-1.3 27.614-3.573-48.081-9.747-84.143-51.98-84.143-102.985v-1.299c13.969 7.797 30.214 12.67 47.431 13.319-28.264-18.843-46.781-51.005-46.781-87.391 0-19.492 5.197-37.36 14.294-52.954 51.655 63.675 129.3 105.258 216.365 109.807-1.624-7.797-2.599-15.918-2.599-24.04 0-57.828 46.782-104.934 104.934-104.934 30.213 0 57.502 12.67 76.67 33.137 23.715-4.548 46.456-13.32 66.599-25.34-7.798 24.366-24.366 44.833-46.132 57.827 21.117-2.273 41.584-8.122 60.426-16.243-14.292 20.791-32.161 39.308-52.628 54.253z"></path></svg> <a href="https://twitter.com/epiRhandbook">epiRhandbook</a> <br> <svg viewBox="0 0 512 512" style="height:1em;position:relative;display:inline-block;top:.1em;fill:white;" xmlns="http://www.w3.org/2000/svg"> <path d="M440 6.5L24 246.4c-34.4 19.9-31.1 70.8 5.7 85.9L144 379.6V464c0 46.4 59.2 65.5 86.6 28.6l43.8-59.1 111.9 46.2c5.9 2.4 12.1 3.6 18.3 3.6 8.2 0 16.3-2.1 23.6-6.2 12.8-7.2 21.6-20 23.9-34.5l59.4-387.2c6.1-40.1-36.9-68.8-71.5-48.9zM192 464v-64.6l36.6 15.1L192 464zm212.6-28.7l-153.8-63.5L391 169.5c10.7-15.5-9.5-33.5-23.7-21.2L155.8 332.6 48 288 464 48l-59.4 387.3z"></path></svg> <a href="mailto:epirhandbook@gmail.com">epirhandbook@gmail.com</a>
### August 2021

---











# About us  

## R support for applied epis  

![](https://github.com/appliedepi/epiRhandbook_eng/raw/master/images/Epi%20R%20Handbook%20Banner%20Beige%201500x500.png)

* We are a grassroots collaborative of applied epidemiologists  
* The (free) Epi R Handbook has been used by 40,000 people worldwide
* Now we offer customized training to health departments and NGOs  


*Bookmark www.epiRhandbook.com*  


???
- What makes us different is that we focus on the challenges of applied epi, not academic epi. We emphasize the skills used every day by ground-level epidemiologists. 





---
# Today's session   

Today is primarily *explanation* and *demonstration*, following from the previous [demonstration on data management and workflow](https://appliedepi.github.io/emory_training/presentation/slides.html).  

We assume you have reviewed the Handbook pages on [R Basics](https://epirhandbook.com/r-basics.html) and [ggplot basics](https://epirhandbook.com/ggplot-basics.html).  

![](https://github.com/appliedepi/emory_training/blob/master/presentation/images/EDGE.png?raw=true)  




???
- The learning process can be summarised into this acronym "EDGE". Today's session is primarily a *demonstration* with question &amp; answer session. We assume that you have read at least some of the relevant pages in the Epi R Handbook prior to this session. We also offer trainings in which we guide you through case studies with hands-on coaching. 


---
# Outline

1) Setting the scene (directory, packages, data import)  
2) Fundamentals of ggplot  
3) Bar charts  
4) Epidemic curves  
5) Demographic pyramids  
6) Scatter plots  
7) Plot captions  

The Epi R Handbook contains more examples and more complex plots, for your personal reading  







---
# Visualization options in R  

Today we focus on **ggplot2** because:  

* It is good for fast data exploration of multi-dimensional data  
* It produces very high quality final outputs  
* Is accompanied by many packages that expand functionality  
* Has well-structured grammar = consistency  

Other plotting options include **base** R, **lattice**, and **plotly**  










---
# Setting the scene - directory structure  

Our R work is conducted within a dedicated directory that contains:  

* An R project (optional but advised)  
* Rmarkdown script(s)  
* A data folder  


```
## C:/Users/Neale/OneDrive - Neale Batra/Documents/Analytic Software/R/Projects/R handbook/Trainings/Emory Aug 2021/emory_training/case_study
## +-- case_study.Rproj
## +-- data
## |   +-- linelist_cleaned.rds
## |   +-- linelist_cleaned.xlsx
## |   \-- linelist_raw.xlsx
## \-- weekly_report.Rmd
```








---
# Load packages  

**ggplot2** is included within the **tidyverse** mega-package (read more [here](https://www.tidyverse.org/)).  


```r
pacman::p_load(
  rio,            # import/export
  here,           # file locator
  rmarkdown,      # reports
  tidyverse       # mega-package for data management and visualization
  )
```

The **tidyverse** also includes these packages:  
* **dplyr** (data management)  
* **stringr** (characters and text)  
* **forcats** (factors / ordered categories)  
* and many others...  








---
# Import data

We use a *clean* dataset, to focus on visualization techniques.  

* Use `import()` from **rio** to import an RDS file  
* Use `here()` from **here** to locate the file relative to the R project root




```r
linelist &lt;- import(here::here("data", "linelist_cleaned.rds"))
```


*Note: A .rds file can store an R data frame and retain column classes*  



---
# Review data  

Below are the first 25 rows of the linelist:  

<div id="htmlwidget-ff5de0ff4ee74a339824" style="width:100%;height:auto;" class="datatables html-widget"></div>
<script type="application/json" data-for="htmlwidget-ff5de0ff4ee74a339824">{"x":{"filter":"none","data":[["1","2","3","4","5","6","7","8","9","10","11","12","13","14","15","16","17","18","19","20","21","22","23","24","25"],["5fe599","8689b7","11f8ea","b8812a","893f25","be99c8","07e3e8","369449","f393b4","1389ca","2978ac","57a565","fc15ef","2eaa9a","bbfa93","c97dd9","f50e8a","3a7673","7f5a01","ddddee","99e8fa","567136","9371a9","bc2adf","403057"],["2014-05-13","2014-05-13","2014-05-16","2014-05-18","2014-05-21","2014-05-22","2014-05-27","2014-06-02","2014-06-05","2014-06-05","2014-06-06","2014-06-13","2014-06-16","2014-06-17","2014-06-18","2014-06-19","2014-06-22","2014-06-23","2014-06-25","2014-06-26","2014-06-28","2014-07-02","2014-07-08","2014-07-09","2014-07-09"],[null,"Recover","Recover",null,"Recover","Recover","Recover","Death","Recover","Death","Death","Death","Recover","Recover",null,"Recover",null,null,"Death","Death","Recover",null,null,null,"Death"],["m","f","m","f","m","f","f","f","m","f","m","m","m","f","f","m","f","f","f","f","m","m","f","m","f"],[2,3,56,18,3,16,16,0,61,27,12,42,19,7,7,13,35,17,11,11,19,54,14,28,6],["Other","Missing","St. Mark's Maternity Hospital (SMMH)","Port Hospital","Military Hospital","Port Hospital","Missing","Missing","Missing","Missing","Port Hospital","Military Hospital","Missing","Missing","Other","Port Hospital","Port Hospital","Port Hospital","Missing","Other","Port Hospital","Port Hospital","St. Mark's Maternity Hospital (SMMH)","Missing","Other"],[48,59,238,135,71,116,87,11,226,174,112,186,174,90,91,152,214,137,117,131,150,241,131,161,80],[27,25,91,41,36,56,47,0,86,69,67,84,68,44,34,66,78,47,53,47,71,86,53,69,38],[-13.2157351064963,-13.2152339775486,-13.212910703914,-13.2363711169728,-13.2228638912441,-13.222625321098,-13.2331547837254,-13.2320975453153,-13.2225511595637,-13.2572163655863,-13.2206286746001,-13.253989309478,-13.2385127873491,-13.209391925612,-13.2157278814899,-13.2243437095992,-13.2336087079551,-13.21422143145,-13.2339681355349,-13.2535640411465,-13.2250089377786,-13.2160657166043,-13.2680671272333,-13.2266742923612,-13.2160179088168],[8.46897295100924,8.45171855856465,8.46481700596819,8.4754761613651,8.46082377490923,8.46183062600728,8.46272931462646,8.46144367534271,8.46191259217774,8.47292327643506,8.48401630165138,8.45837125340844,8.47761705512509,8.47570184950483,8.47779946878972,8.47145134147474,8.47804840685363,8.48528034195779,8.46957530395867,8.45957352078114,8.47404889511544,8.48802917129884,8.473437335922,8.48408263734462,8.46242233645879],[null,"09:36","16:48","11:22","12:60","14:13","14:33","09:25","11:16","10:55","16:03","11:14","12:42","11:06","09:10","08:45",null,"15:41","13:34","18:58","12:43","16:33","14:29","07:18","08:11"],[22,22,21,23,23,21,21,22,22,22,22,22,22,21,23,22,23,21,22,23,21,23,21,24,23],[2,1,2,2,1,1,2,1,1,2,2,2,1,0,2,0,1,1,2,2,1,1,1,0,2]],"container":"<table class=\"display\">\n  <thead>\n    <tr>\n      <th> <\/th>\n      <th>case_id<\/th>\n      <th>date_onset<\/th>\n      <th>outcome<\/th>\n      <th>gender<\/th>\n      <th>age_years<\/th>\n      <th>hospital<\/th>\n      <th>ht_cm<\/th>\n      <th>wt_kg<\/th>\n      <th>lon<\/th>\n      <th>lat<\/th>\n      <th>time_admission<\/th>\n      <th>ct_blood<\/th>\n      <th>days_onset_hosp<\/th>\n    <\/tr>\n  <\/thead>\n<\/table>","options":{"scrollY":300,"scrollX":600,"pageLength":25,"fontSize":"25%","dom":"ti","ordering":false,"rownames":false,"options":{"pageLength":5,"scrollX":true},"class":"white-space: nowrap","columnDefs":[{"className":"dt-right","targets":[5,7,8,9,10,12,13]},{"orderable":false,"targets":0}],"order":[],"autoWidth":false,"orderClasses":false}},"evals":[],"jsHooks":[]}</script>


???
- I am not sure this is the best visualisation? I like seeng a couple of lines but the columns will only be seen in passing. Should we simplify the dataframe to only keep columns of interest during the rest of the presentation so that we can get a better glimpse? Or also use a `glimpse or str` under your table? Or use a packade like https://www.repidemicsconsortium.org/matchmaker/ ]





---
# Fundamentals of ggplot2





---
# gg-what??  

- The **ggplot2** *package* is the most popular data visualization tool in R  
- Its `ggplot()` *function* is at the core of the package  
- This whole approach is colloquially known as “ggploting”  
- Resulting figures are sometimes affectionately called “ggplots”  

**ggplot2** benefits from a wide variety of supplementary R packages that extends its functionalities, such as **gganimate**, **ggthemr**, **ggdendro**, **gghighlight**, **ggforce**...  

.footnote[
Question: What does the "gg” in these names represent?
]

???
- "gg" represents the “grammar of graphics” used to construct the figures 





---
# Syntax overview  

* “Add” plot layers and design elements on top of one another  
* Build a multi-layer plot object that can be saved, modified, printed, exported...  

--  

Order of layers will usually look like this:

1) The baseline `ggplot()` command “opens” the plot- typically the dataset is specified here  
2) Add “geom” layers that visualize data geometrically as shapes  
3) Add design elements such as axis labels, title, fonts, sizes, color schemes, legends, or axes rotation  


A simple example follows. We will explain each component.



---
# Syntax overview  

.pull-left[

`ggplot()` creates an empty canvas.  
Assign the data frame `linelist`.  


```r
ggplot(data = linelist)                   
```

Or alternatively use the `%&gt;%` pipe operator to "pipe" the data frame *into* `ggplot()`  


```r
linelist %&gt;%
  ggplot()
```

]

.pull-right[

&lt;img src="slides_ggplot_files/figure-html/unnamed-chunk-9-1.png" width="504" /&gt;
] 

???
As you can see, this is only a blank canvas, we have not defined what should be in the x and y axes, nor linked any data to be plot. It's an empty page waiting for you. This does not produce visible changes, but ggplot will now look for columns within the *linelist* dataframe.
Notes: if several data frames are needed, they can be added in their own *geoms* (example later).





---
# Syntax overview  

.pull-left[

Map the `x` and `y` axes to columns in the data


```r
ggplot(data = linelist,
*       mapping = aes(
*         x = ht_cm,
*         y = wt_kg)
)
```

]

.pull-right[

&lt;img src="slides_ggplot_files/figure-html/unnamed-chunk-11-1.png" width="504" /&gt;
] 




---
# Syntax overview  

.pull-left[

Add a "geom" layer to display the data as points


```r
ggplot(data = linelist,
       mapping = aes(
         x = ht_cm,
         y = wt_kg))+
*  geom_point()
```

]

.pull-right[


&lt;img src="slides_ggplot_files/figure-html/unnamed-chunk-13-1.png" width="504" /&gt;
] 



---
# Syntax overview  

.pull-left[

Axes can also be mapped within the geom command


```r
ggplot(data = linelist,
*       mapping = aes(
*         x = ht_cm,
*         y = wt_kg))+
  geom_point()
```

is the same as:  


```r
ggplot(data = linelist)+
  geom_point(
*    mapping = aes(
*      x = ht_cm,
*      y = wt_kg))
```

]

.pull-right[

&lt;img src="slides_ggplot_files/figure-html/unnamed-chunk-16-1.png" width="504" /&gt;
] 

???
- Explain why you might use one or the other  





---
# Syntax overview  

.pull-left[

Define an aesthetic value as *static* (applying to all data points) by writing it within the geom but outside the `aes()`  


```r
ggplot(data = linelist)+
  geom_point(
    mapping = aes(
      x = ht_cm,
      y = wt_kg),
*   color = "purple")
```

]

.pull-right[

&lt;img src="slides_ggplot_files/figure-html/unnamed-chunk-18-1.png" width="504" /&gt;
] 






---
# Syntax overview  

.pull-left[

Define an aesthetic value as *dynamic* (varying for each data point) by writing it within the geom *and within the `aes()`  


```r
ggplot(data = linelist)+
  geom_point(
    mapping = aes(
      x = ht_cm,
      y = wt_kg,
*     color = gender)
    )
```

]

.pull-right[

&lt;img src="slides_ggplot_files/figure-html/unnamed-chunk-20-1.png" width="504" /&gt;
]





---
# Syntax overview  

.pull-left[

Here: 

* `color = ` aesthetic is a dynamic value assigned to column `gender`  
* `alpha = ` transparency aesthetic is a static 30%  


```r
ggplot(data = linelist)+
  geom_point(
    mapping = aes(
      x = ht_cm,
      y = wt_kg,
      color = gender),
*   alpha = 0.3)
```

]

.pull-right[

&lt;img src="slides_ggplot_files/figure-html/unnamed-chunk-22-1.png" width="504" /&gt;
]



---
# Syntax overview  

.pull-left[

Add labels for title, axes, and legend  


```r
ggplot(data = linelist)+
  geom_point(
    mapping = aes(
      x = ht_cm,
      y = wt_kg,
      color = gender),
    alpha = 0.3)+
* labs(
*    title = "Weight, height &amp; gender",
*    x = "Height (cm)",
*    y = "Weight (kg)",
*    caption = "Outbreak A",
*    color = "Gender"
)
```

]

.pull-right[

&lt;img src="slides_ggplot_files/figure-html/unnamed-chunk-24-1.png" width="504" /&gt;
]




---
# Syntax overview  

.pull-left[

"themes" are non-data plot features  

Pre-defined themes are easy to add  


```r
ggplot(data = linelist)+
  geom_point(
    mapping = aes(
      x = ht_cm,
      y = wt_kg,
      color = gender),
    alpha = 0.3)+
  labs(
    title = "Weight, height &amp; gender",
    x = "Height (cm)",
    y = "Weight (kg)",
    caption = "Outbreak A",
    color = "Gender"
  )+
* theme_minimal()
```

]

.pull-right[

&lt;img src="slides_ggplot_files/figure-html/unnamed-chunk-26-1.png" width="504" /&gt;
]



---
# Syntax overview  

.pull-left[

Micro-adjust with `theme()`  


```r
ggplot(data = linelist)+
  geom_point(
    mapping = aes(
      x = ht_cm,
      y = wt_kg,
      color = gender),
    alpha = 0.3)+
  labs(
    title = "Weight, height &amp; gender",
    x = "Height (cm)",
    y = "Weight (kg)",
    caption = "Outbreak A",
    color = "Gender"
  )+
  theme_minimal()+
* theme(legend.position = "bottom")
```

]

.pull-right[

&lt;img src="slides_ggplot_files/figure-html/unnamed-chunk-28-1.png" width="504" /&gt;
]







---
# *Map* column(s) to the axes  

.pull-left[

Start by mapping the axes.  

Use the `mapping = ` argument and make axes assignments within `aes()`.  


```r
ggplot(
  data = linelist,
  mapping = aes(
*   x = days_onset_hosp,
*   y = ct_blood)
  )
```

] 

.pull-right[
&lt;img src="slides_ggplot_files/figure-html/unnamed-chunk-30-1.png" width="504" /&gt;
]

???






---
# Geoms  


.pull-left[
Data are visualized using "geom" commands, such as `geom_point()`.  

Many classical “geoms”, including:  

Geometry        |Geom                
----------------|--------------------
Histograms      |`geom_histogram()`
Points          |`geom_point()`  
Lines           |`geom_line()`  
Box plots       |`geom_boxplot()`  
Bar charts      |`geom_bar()` or `geom_col()`  
Trend lines     |`geom_smooth()`  

Full list [here](https://ggplot2.tidyverse.org/reference/)  

]


.pull-right[

&lt;img src="slides_ggplot_files/figure-html/unnamed-chunk-31-1.png" width="504" /&gt;

]


---
# Adding geoms  


.pull-left[

"geoms" are *added* with a "`+`" to the `ggplot()`  


```r
ggplot(
    data = linelist,
    mapping = aes(
      x = days_onset_hosp,       
      y = ct_blood)
    )
```


]

.pull-right[


&lt;img src="slides_ggplot_files/figure-html/unnamed-chunk-33-1.png" width="504" /&gt;

]

???






---
# Adding geoms  


.pull-left[

"geoms" are *added* with a "`+`" to the `ggplot()`  


```r
ggplot(
    data = linelist,
    mapping = aes(
      x = days_onset_hosp,       
      y = ct_blood)
    )+
* geom_point()
```


]

.pull-right[


&lt;img src="slides_ggplot_files/figure-html/unnamed-chunk-35-1.png" width="504" /&gt;

]

???





---
# Adding geoms  


.pull-left[

"geoms" are *added* with a "`+`" to the `ggplot()`  


```r
ggplot(
    data = linelist,
    mapping = aes(
      x = days_onset_hosp,       
      y = ct_blood)
    )+
  geom_point()+
* geom_hline(yintercept = 22)
```


]

.pull-right[


&lt;img src="slides_ggplot_files/figure-html/unnamed-chunk-37-1.png" width="504" /&gt;

]

???
Multiple geoms on one graph:
* You can plot several geoms on the same graph. 
* Each is added to previous ggplot2 commands with a **`+`**
* Geoms are plotted _sequentially_: later geoms are plotted on top of previous ones





---
# Define mappings

.pull-left[

Other aesthetics **Mapping** is telling ggplot which variable goes into which _aesthetics_.

-- 
Main _aesthetics_ are:  
* x axis
* y axis
* color of lines
* colors of areas (_fill_)
* transparency
* size
*...
--
*Map* the column `date_onset` to the x-axis   


```r
ggplot(
  data = linelist,
* mapping = aes(x = date_onset)
  )
```


] 

.pull-right[
&lt;img src="slides_ggplot_files/figure-html/unnamed-chunk-39-1.png" width="504" /&gt;
]

???
- Note about the work "aesthetics" and how its ggplot meaning is slightly different than in common English. It does not mean the trappings, but is specifically about the data that is being plotted in geometries (shapes) - not the surrounding background colors etc.
- Mappings essentially tell ggplot which variables go in which aestetics.
- Now we have defined the x axis, we can tell ggplot to plot actual data. Now you need to think about the type of representation that you want (transition).


---
# Make an histogram

.pull-left[

The `geom_histogram()` function computes the counts on raw data automaticaly.  


```r
ggplot(
  data = linelist,
  mapping = aes(x = date_onset)  
*) +
* geom_histogram()
```

--
Since we have only one geom and one dataframe linked to the plot, we could move the _mapping_ to the `geom_histogram()` call:  


```r
ggplot() + 
  geom_histogram(
    data = linelist,
    mapping = aes(x = date_onset))
```
] 

.pull-right[
&lt;img src="slides_ggplot_files/figure-html/unnamed-chunk-42-1.png" width="504" /&gt;
]





---
# Groups in the data

So far the graph shows the distribution of cases in all hospitals. 

It would make sense to break down the visualization by hospitals.

Quick options:  

* Fill each hospital in different color (stacked histogram)
* Create multiple plots, each showing a different hospital

You can do either in one line of code.




---
# Common error  

.pull-left[

You have multiple data points per x-value, but forgot to separate out the groups


```r
linelist %&gt;% 
  group_by(hospital,
           week_hospitalisation = lubridate::floor_date(date_onset, "week")) %&gt;% 
  summarise(n_cases = n()) %&gt;% 
  ggplot(
    mapping = aes(
      x = week_hospitalisation,       
      y = n_cases)
    )+
  geom_line()+
  labs(title = "geom_line()")
```
]

.pull-right[

&lt;img src="slides_ggplot_files/figure-html/unnamed-chunk-44-1.png" width="504" /&gt;
]



---
# Common error - resolved  

.pull-left[

You have multiple data points per x-value, but forgot to separate out the groups


```r
linelist %&gt;% 
  group_by(hospital,
           week_hospitalisation = lubridate::floor_date(date_onset, "week")) %&gt;% 
  summarise(n_cases = n()) %&gt;% 
  ggplot(
    mapping = aes(
      x = week_hospitalisation,       
      y = n_cases,
*     color = hospital)
    )+
  geom_line()+
  labs(title = "geom_line()")
```
]

.pull-right[

&lt;img src="slides_ggplot_files/figure-html/unnamed-chunk-46-1.png" width="504" /&gt;
]







---
# Add color

.pull-left[

To add color to the graph, we need to _map_ the variable `hospital` to the _fill_ aesthetics:  


```r
ggplot(data = linelist,
       mapping = aes(
         x    = date_onset,
*        fill = hospital
         )
       ) +
  geom_histogram()
```

Note: the _fill_ aesthetics control the color filling areas while the _color_ aesthetics control the color of lines and points.

] 

.pull-right[
&lt;img src="slides_ggplot_files/figure-html/unnamed-chunk-48-1.png" width="504" /&gt;
]



---
# Facets/small-multiples

.pull-left[

To generate one graph by hospital:  


```r
ggplot(data = linelist,
       mapping = aes(x = date_onset)) +
  geom_histogram() +
  facet_wrap(~hospital,
*            ncol = 2)
```

Note: the _fill_ aesthetics control the color filling areas while the _color_ aesthetics control the color of lines and points.

] 

.pull-right[
&lt;img src="slides_ggplot_files/figure-html/unnamed-chunk-50-1.png" width="504" /&gt;
]



---

Where do the arguments go?  
`data = `
`mapping = aes()`  
`x = `  
`y = `
`fill = `  



---
# Visualizing your data

There is a whole science to properly choosing *how* to visualize your data. We will only briefly touch upon this in the context of **ggplot2**  

---
# Distribution of one continuous column  


---
# Epidemic curves


---
# Demographic pyramids  


---
# Two continuous columns  


---
# Three continuous columns  

Heatplots, density plots


---
# One categorical column  

Inverted axes  


---
# Two categorical columns  

Heatplots

---
# Continuous by categorical groups  


---
# Facets/small-multiples

I proposed to introduce it sooner, so here we can show other arguments (ncol, nrows, scales) and facet_grid?

---
# Factors and ordering plots  


---
# Dynamics captions






---
# Header  
## This is a subheader


- Hello our name is 
  + blabla
  + blabla

.footnote[
[1] Something _super_ important to say 

[2] Some **other** stuff 

[3] bla
]


???

- I think these are presenter notes 
- You can see them in presenter mode 
  + Keyboard shortcut is 'p' 
---

# Sequential reveal of bullet points

You can reveal stuff bit by bit using to dashes between sections 

--

- This is my first point 

--

- Then I move on to this fascinating point 

--

- And finish with this blabla


---
class: inverse, center, middle

# This is a section header slide

---
class: center, middle
background-image: url(https://github.com/appliedepi/epiRhandbook_eng/raw/master/images/Epi%20R%20Handbook%20Banner%20Beige%201500x500.png)
background-size: 75%
background-position: 50% 0%

# Alternative section header slide

### Include epirhandbook banner (see [images slides](#imageslide))

---

# Tables with Knitr 

Tables need to be in HTML format  
So either Knitter or flextable

&lt;table&gt;
 &lt;thead&gt;
  &lt;tr&gt;
   &lt;th style="text-align:left;"&gt;   &lt;/th&gt;
   &lt;th style="text-align:right;"&gt; mpg &lt;/th&gt;
   &lt;th style="text-align:right;"&gt; cyl &lt;/th&gt;
   &lt;th style="text-align:right;"&gt; disp &lt;/th&gt;
   &lt;th style="text-align:right;"&gt; hp &lt;/th&gt;
   &lt;th style="text-align:right;"&gt; drat &lt;/th&gt;
   &lt;th style="text-align:right;"&gt; wt &lt;/th&gt;
   &lt;th style="text-align:right;"&gt; qsec &lt;/th&gt;
   &lt;th style="text-align:right;"&gt; vs &lt;/th&gt;
   &lt;th style="text-align:right;"&gt; am &lt;/th&gt;
   &lt;th style="text-align:right;"&gt; gear &lt;/th&gt;
   &lt;th style="text-align:right;"&gt; carb &lt;/th&gt;
  &lt;/tr&gt;
 &lt;/thead&gt;
&lt;tbody&gt;
  &lt;tr&gt;
   &lt;td style="text-align:left;"&gt; Mazda RX4 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 21.0 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 6 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 160 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 110 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 3.90 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 2.620 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 16.46 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 0 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 1 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 4 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 4 &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:left;"&gt; Mazda RX4 Wag &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 21.0 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 6 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 160 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 110 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 3.90 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 2.875 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 17.02 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 0 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 1 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 4 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 4 &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:left;"&gt; Datsun 710 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 22.8 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 4 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 108 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 93 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 3.85 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 2.320 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 18.61 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 1 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 1 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 4 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 1 &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:left;"&gt; Hornet 4 Drive &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 21.4 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 6 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 258 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 110 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 3.08 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 3.215 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 19.44 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 1 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 0 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 3 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 1 &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:left;"&gt; Hornet Sportabout &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 18.7 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 8 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 360 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 175 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 3.15 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 3.440 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 17.02 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 0 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 0 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 3 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 2 &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:left;"&gt; Valiant &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 18.1 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 6 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 225 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 105 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 2.76 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 3.460 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 20.22 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 1 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 0 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 3 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 1 &lt;/td&gt;
  &lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;

---

# Tables with Flextable 

You can colour in rows directly with flextable


&lt;template id="1492e9d1-55c2-4f56-8fc6-c8d81a74d5b8"&gt;&lt;style&gt;
.tabwid table{
  border-collapse:collapse;
  line-height:1;
  margin-left:auto;
  margin-right:auto;
  border-width: 0;
  display: table;
  margin-top: 1.275em;
  margin-bottom: 1.275em;
  border-spacing: 0;
  border-color: transparent;
}
.tabwid_left table{
  margin-left:0;
}
.tabwid_right table{
  margin-right:0;
}
.tabwid td {
    padding: 0;
}
.tabwid a {
  text-decoration: none;
}
.tabwid thead {
    background-color: transparent;
}
.tabwid tfoot {
    background-color: transparent;
}
.tabwid table tr {
background-color: transparent;
}
&lt;/style&gt;&lt;div class="tabwid"&gt;&lt;style&gt;.cl-da603c80{border-collapse:collapse;}.cl-da547d96{font-family:'Arial';font-size:11pt;font-weight:normal;font-style:normal;text-decoration:none;color:rgba(0, 0, 0, 1.00);background-color:transparent;}.cl-da54a4a6{margin:0;text-align:right;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);padding-bottom:5pt;padding-top:5pt;padding-left:5pt;padding-right:5pt;line-height: 1;background-color:transparent;}.cl-da54f2bc{width:54pt;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-da54f2bd{width:54pt;background-clip: padding-box;background-color:rgba(255, 255, 0, 1.00);vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-da54f2be{width:54pt;background-color:transparent;vertical-align: middle;border-bottom: 2pt solid rgba(102, 102, 102, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-da54f2bf{width:54pt;background-color:transparent;vertical-align: middle;border-bottom: 2pt solid rgba(102, 102, 102, 1.00);border-top: 2pt solid rgba(102, 102, 102, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}&lt;/style&gt;&lt;table class='cl-da603c80'&gt;&lt;thead&gt;&lt;tr style="overflow-wrap:break-word;"&gt;&lt;td class="cl-da54f2bf"&gt;&lt;p class="cl-da54a4a6"&gt;&lt;span class="cl-da547d96"&gt;mpg&lt;/span&gt;&lt;/p&gt;&lt;/td&gt;&lt;td class="cl-da54f2bf"&gt;&lt;p class="cl-da54a4a6"&gt;&lt;span class="cl-da547d96"&gt;cyl&lt;/span&gt;&lt;/p&gt;&lt;/td&gt;&lt;td class="cl-da54f2bf"&gt;&lt;p class="cl-da54a4a6"&gt;&lt;span class="cl-da547d96"&gt;disp&lt;/span&gt;&lt;/p&gt;&lt;/td&gt;&lt;td class="cl-da54f2bf"&gt;&lt;p class="cl-da54a4a6"&gt;&lt;span class="cl-da547d96"&gt;hp&lt;/span&gt;&lt;/p&gt;&lt;/td&gt;&lt;td class="cl-da54f2bf"&gt;&lt;p class="cl-da54a4a6"&gt;&lt;span class="cl-da547d96"&gt;drat&lt;/span&gt;&lt;/p&gt;&lt;/td&gt;&lt;td class="cl-da54f2bf"&gt;&lt;p class="cl-da54a4a6"&gt;&lt;span class="cl-da547d96"&gt;wt&lt;/span&gt;&lt;/p&gt;&lt;/td&gt;&lt;td class="cl-da54f2bf"&gt;&lt;p class="cl-da54a4a6"&gt;&lt;span class="cl-da547d96"&gt;qsec&lt;/span&gt;&lt;/p&gt;&lt;/td&gt;&lt;td class="cl-da54f2bf"&gt;&lt;p class="cl-da54a4a6"&gt;&lt;span class="cl-da547d96"&gt;vs&lt;/span&gt;&lt;/p&gt;&lt;/td&gt;&lt;td class="cl-da54f2bf"&gt;&lt;p class="cl-da54a4a6"&gt;&lt;span class="cl-da547d96"&gt;am&lt;/span&gt;&lt;/p&gt;&lt;/td&gt;&lt;td class="cl-da54f2bf"&gt;&lt;p class="cl-da54a4a6"&gt;&lt;span class="cl-da547d96"&gt;gear&lt;/span&gt;&lt;/p&gt;&lt;/td&gt;&lt;td class="cl-da54f2bf"&gt;&lt;p class="cl-da54a4a6"&gt;&lt;span class="cl-da547d96"&gt;carb&lt;/span&gt;&lt;/p&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/thead&gt;&lt;tbody&gt;&lt;tr style="overflow-wrap:break-word;"&gt;&lt;td class="cl-da54f2bc"&gt;&lt;p class="cl-da54a4a6"&gt;&lt;span class="cl-da547d96"&gt;21.0&lt;/span&gt;&lt;/p&gt;&lt;/td&gt;&lt;td class="cl-da54f2bc"&gt;&lt;p class="cl-da54a4a6"&gt;&lt;span class="cl-da547d96"&gt;6&lt;/span&gt;&lt;/p&gt;&lt;/td&gt;&lt;td class="cl-da54f2bc"&gt;&lt;p class="cl-da54a4a6"&gt;&lt;span class="cl-da547d96"&gt;160&lt;/span&gt;&lt;/p&gt;&lt;/td&gt;&lt;td class="cl-da54f2bc"&gt;&lt;p class="cl-da54a4a6"&gt;&lt;span class="cl-da547d96"&gt;110&lt;/span&gt;&lt;/p&gt;&lt;/td&gt;&lt;td class="cl-da54f2bc"&gt;&lt;p class="cl-da54a4a6"&gt;&lt;span class="cl-da547d96"&gt;3.90&lt;/span&gt;&lt;/p&gt;&lt;/td&gt;&lt;td class="cl-da54f2bc"&gt;&lt;p class="cl-da54a4a6"&gt;&lt;span class="cl-da547d96"&gt;2.620&lt;/span&gt;&lt;/p&gt;&lt;/td&gt;&lt;td class="cl-da54f2bc"&gt;&lt;p class="cl-da54a4a6"&gt;&lt;span class="cl-da547d96"&gt;16.46&lt;/span&gt;&lt;/p&gt;&lt;/td&gt;&lt;td class="cl-da54f2bc"&gt;&lt;p class="cl-da54a4a6"&gt;&lt;span class="cl-da547d96"&gt;0&lt;/span&gt;&lt;/p&gt;&lt;/td&gt;&lt;td class="cl-da54f2bc"&gt;&lt;p class="cl-da54a4a6"&gt;&lt;span class="cl-da547d96"&gt;1&lt;/span&gt;&lt;/p&gt;&lt;/td&gt;&lt;td class="cl-da54f2bc"&gt;&lt;p class="cl-da54a4a6"&gt;&lt;span class="cl-da547d96"&gt;4&lt;/span&gt;&lt;/p&gt;&lt;/td&gt;&lt;td class="cl-da54f2bc"&gt;&lt;p class="cl-da54a4a6"&gt;&lt;span class="cl-da547d96"&gt;4&lt;/span&gt;&lt;/p&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr style="overflow-wrap:break-word;"&gt;&lt;td class="cl-da54f2bd"&gt;&lt;p class="cl-da54a4a6"&gt;&lt;span class="cl-da547d96"&gt;21.0&lt;/span&gt;&lt;/p&gt;&lt;/td&gt;&lt;td class="cl-da54f2bd"&gt;&lt;p class="cl-da54a4a6"&gt;&lt;span class="cl-da547d96"&gt;6&lt;/span&gt;&lt;/p&gt;&lt;/td&gt;&lt;td class="cl-da54f2bd"&gt;&lt;p class="cl-da54a4a6"&gt;&lt;span class="cl-da547d96"&gt;160&lt;/span&gt;&lt;/p&gt;&lt;/td&gt;&lt;td class="cl-da54f2bd"&gt;&lt;p class="cl-da54a4a6"&gt;&lt;span class="cl-da547d96"&gt;110&lt;/span&gt;&lt;/p&gt;&lt;/td&gt;&lt;td class="cl-da54f2bd"&gt;&lt;p class="cl-da54a4a6"&gt;&lt;span class="cl-da547d96"&gt;3.90&lt;/span&gt;&lt;/p&gt;&lt;/td&gt;&lt;td class="cl-da54f2bd"&gt;&lt;p class="cl-da54a4a6"&gt;&lt;span class="cl-da547d96"&gt;2.875&lt;/span&gt;&lt;/p&gt;&lt;/td&gt;&lt;td class="cl-da54f2bd"&gt;&lt;p class="cl-da54a4a6"&gt;&lt;span class="cl-da547d96"&gt;17.02&lt;/span&gt;&lt;/p&gt;&lt;/td&gt;&lt;td class="cl-da54f2bd"&gt;&lt;p class="cl-da54a4a6"&gt;&lt;span class="cl-da547d96"&gt;0&lt;/span&gt;&lt;/p&gt;&lt;/td&gt;&lt;td class="cl-da54f2bd"&gt;&lt;p class="cl-da54a4a6"&gt;&lt;span class="cl-da547d96"&gt;1&lt;/span&gt;&lt;/p&gt;&lt;/td&gt;&lt;td class="cl-da54f2bd"&gt;&lt;p class="cl-da54a4a6"&gt;&lt;span class="cl-da547d96"&gt;4&lt;/span&gt;&lt;/p&gt;&lt;/td&gt;&lt;td class="cl-da54f2bd"&gt;&lt;p class="cl-da54a4a6"&gt;&lt;span class="cl-da547d96"&gt;4&lt;/span&gt;&lt;/p&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr style="overflow-wrap:break-word;"&gt;&lt;td class="cl-da54f2bc"&gt;&lt;p class="cl-da54a4a6"&gt;&lt;span class="cl-da547d96"&gt;22.8&lt;/span&gt;&lt;/p&gt;&lt;/td&gt;&lt;td class="cl-da54f2bc"&gt;&lt;p class="cl-da54a4a6"&gt;&lt;span class="cl-da547d96"&gt;4&lt;/span&gt;&lt;/p&gt;&lt;/td&gt;&lt;td class="cl-da54f2bc"&gt;&lt;p class="cl-da54a4a6"&gt;&lt;span class="cl-da547d96"&gt;108&lt;/span&gt;&lt;/p&gt;&lt;/td&gt;&lt;td class="cl-da54f2bc"&gt;&lt;p class="cl-da54a4a6"&gt;&lt;span class="cl-da547d96"&gt;93&lt;/span&gt;&lt;/p&gt;&lt;/td&gt;&lt;td class="cl-da54f2bc"&gt;&lt;p class="cl-da54a4a6"&gt;&lt;span class="cl-da547d96"&gt;3.85&lt;/span&gt;&lt;/p&gt;&lt;/td&gt;&lt;td class="cl-da54f2bc"&gt;&lt;p class="cl-da54a4a6"&gt;&lt;span class="cl-da547d96"&gt;2.320&lt;/span&gt;&lt;/p&gt;&lt;/td&gt;&lt;td class="cl-da54f2bc"&gt;&lt;p class="cl-da54a4a6"&gt;&lt;span class="cl-da547d96"&gt;18.61&lt;/span&gt;&lt;/p&gt;&lt;/td&gt;&lt;td class="cl-da54f2bc"&gt;&lt;p class="cl-da54a4a6"&gt;&lt;span class="cl-da547d96"&gt;1&lt;/span&gt;&lt;/p&gt;&lt;/td&gt;&lt;td class="cl-da54f2bc"&gt;&lt;p class="cl-da54a4a6"&gt;&lt;span class="cl-da547d96"&gt;1&lt;/span&gt;&lt;/p&gt;&lt;/td&gt;&lt;td class="cl-da54f2bc"&gt;&lt;p class="cl-da54a4a6"&gt;&lt;span class="cl-da547d96"&gt;4&lt;/span&gt;&lt;/p&gt;&lt;/td&gt;&lt;td class="cl-da54f2bc"&gt;&lt;p class="cl-da54a4a6"&gt;&lt;span class="cl-da547d96"&gt;1&lt;/span&gt;&lt;/p&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr style="overflow-wrap:break-word;"&gt;&lt;td class="cl-da54f2bd"&gt;&lt;p class="cl-da54a4a6"&gt;&lt;span class="cl-da547d96"&gt;21.4&lt;/span&gt;&lt;/p&gt;&lt;/td&gt;&lt;td class="cl-da54f2bd"&gt;&lt;p class="cl-da54a4a6"&gt;&lt;span class="cl-da547d96"&gt;6&lt;/span&gt;&lt;/p&gt;&lt;/td&gt;&lt;td class="cl-da54f2bd"&gt;&lt;p class="cl-da54a4a6"&gt;&lt;span class="cl-da547d96"&gt;258&lt;/span&gt;&lt;/p&gt;&lt;/td&gt;&lt;td class="cl-da54f2bd"&gt;&lt;p class="cl-da54a4a6"&gt;&lt;span class="cl-da547d96"&gt;110&lt;/span&gt;&lt;/p&gt;&lt;/td&gt;&lt;td class="cl-da54f2bd"&gt;&lt;p class="cl-da54a4a6"&gt;&lt;span class="cl-da547d96"&gt;3.08&lt;/span&gt;&lt;/p&gt;&lt;/td&gt;&lt;td class="cl-da54f2bd"&gt;&lt;p class="cl-da54a4a6"&gt;&lt;span class="cl-da547d96"&gt;3.215&lt;/span&gt;&lt;/p&gt;&lt;/td&gt;&lt;td class="cl-da54f2bd"&gt;&lt;p class="cl-da54a4a6"&gt;&lt;span class="cl-da547d96"&gt;19.44&lt;/span&gt;&lt;/p&gt;&lt;/td&gt;&lt;td class="cl-da54f2bd"&gt;&lt;p class="cl-da54a4a6"&gt;&lt;span class="cl-da547d96"&gt;1&lt;/span&gt;&lt;/p&gt;&lt;/td&gt;&lt;td class="cl-da54f2bd"&gt;&lt;p class="cl-da54a4a6"&gt;&lt;span class="cl-da547d96"&gt;0&lt;/span&gt;&lt;/p&gt;&lt;/td&gt;&lt;td class="cl-da54f2bd"&gt;&lt;p class="cl-da54a4a6"&gt;&lt;span class="cl-da547d96"&gt;3&lt;/span&gt;&lt;/p&gt;&lt;/td&gt;&lt;td class="cl-da54f2bd"&gt;&lt;p class="cl-da54a4a6"&gt;&lt;span class="cl-da547d96"&gt;1&lt;/span&gt;&lt;/p&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr style="overflow-wrap:break-word;"&gt;&lt;td class="cl-da54f2bc"&gt;&lt;p class="cl-da54a4a6"&gt;&lt;span class="cl-da547d96"&gt;18.7&lt;/span&gt;&lt;/p&gt;&lt;/td&gt;&lt;td class="cl-da54f2bc"&gt;&lt;p class="cl-da54a4a6"&gt;&lt;span class="cl-da547d96"&gt;8&lt;/span&gt;&lt;/p&gt;&lt;/td&gt;&lt;td class="cl-da54f2bc"&gt;&lt;p class="cl-da54a4a6"&gt;&lt;span class="cl-da547d96"&gt;360&lt;/span&gt;&lt;/p&gt;&lt;/td&gt;&lt;td class="cl-da54f2bc"&gt;&lt;p class="cl-da54a4a6"&gt;&lt;span class="cl-da547d96"&gt;175&lt;/span&gt;&lt;/p&gt;&lt;/td&gt;&lt;td class="cl-da54f2bc"&gt;&lt;p class="cl-da54a4a6"&gt;&lt;span class="cl-da547d96"&gt;3.15&lt;/span&gt;&lt;/p&gt;&lt;/td&gt;&lt;td class="cl-da54f2bc"&gt;&lt;p class="cl-da54a4a6"&gt;&lt;span class="cl-da547d96"&gt;3.440&lt;/span&gt;&lt;/p&gt;&lt;/td&gt;&lt;td class="cl-da54f2bc"&gt;&lt;p class="cl-da54a4a6"&gt;&lt;span class="cl-da547d96"&gt;17.02&lt;/span&gt;&lt;/p&gt;&lt;/td&gt;&lt;td class="cl-da54f2bc"&gt;&lt;p class="cl-da54a4a6"&gt;&lt;span class="cl-da547d96"&gt;0&lt;/span&gt;&lt;/p&gt;&lt;/td&gt;&lt;td class="cl-da54f2bc"&gt;&lt;p class="cl-da54a4a6"&gt;&lt;span class="cl-da547d96"&gt;0&lt;/span&gt;&lt;/p&gt;&lt;/td&gt;&lt;td class="cl-da54f2bc"&gt;&lt;p class="cl-da54a4a6"&gt;&lt;span class="cl-da547d96"&gt;3&lt;/span&gt;&lt;/p&gt;&lt;/td&gt;&lt;td class="cl-da54f2bc"&gt;&lt;p class="cl-da54a4a6"&gt;&lt;span class="cl-da547d96"&gt;2&lt;/span&gt;&lt;/p&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr style="overflow-wrap:break-word;"&gt;&lt;td class="cl-da54f2be"&gt;&lt;p class="cl-da54a4a6"&gt;&lt;span class="cl-da547d96"&gt;18.1&lt;/span&gt;&lt;/p&gt;&lt;/td&gt;&lt;td class="cl-da54f2be"&gt;&lt;p class="cl-da54a4a6"&gt;&lt;span class="cl-da547d96"&gt;6&lt;/span&gt;&lt;/p&gt;&lt;/td&gt;&lt;td class="cl-da54f2be"&gt;&lt;p class="cl-da54a4a6"&gt;&lt;span class="cl-da547d96"&gt;225&lt;/span&gt;&lt;/p&gt;&lt;/td&gt;&lt;td class="cl-da54f2be"&gt;&lt;p class="cl-da54a4a6"&gt;&lt;span class="cl-da547d96"&gt;105&lt;/span&gt;&lt;/p&gt;&lt;/td&gt;&lt;td class="cl-da54f2be"&gt;&lt;p class="cl-da54a4a6"&gt;&lt;span class="cl-da547d96"&gt;2.76&lt;/span&gt;&lt;/p&gt;&lt;/td&gt;&lt;td class="cl-da54f2be"&gt;&lt;p class="cl-da54a4a6"&gt;&lt;span class="cl-da547d96"&gt;3.460&lt;/span&gt;&lt;/p&gt;&lt;/td&gt;&lt;td class="cl-da54f2be"&gt;&lt;p class="cl-da54a4a6"&gt;&lt;span class="cl-da547d96"&gt;20.22&lt;/span&gt;&lt;/p&gt;&lt;/td&gt;&lt;td class="cl-da54f2be"&gt;&lt;p class="cl-da54a4a6"&gt;&lt;span class="cl-da547d96"&gt;1&lt;/span&gt;&lt;/p&gt;&lt;/td&gt;&lt;td class="cl-da54f2be"&gt;&lt;p class="cl-da54a4a6"&gt;&lt;span class="cl-da547d96"&gt;0&lt;/span&gt;&lt;/p&gt;&lt;/td&gt;&lt;td class="cl-da54f2be"&gt;&lt;p class="cl-da54a4a6"&gt;&lt;span class="cl-da547d96"&gt;3&lt;/span&gt;&lt;/p&gt;&lt;/td&gt;&lt;td class="cl-da54f2be"&gt;&lt;p class="cl-da54a4a6"&gt;&lt;span class="cl-da547d96"&gt;1&lt;/span&gt;&lt;/p&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/tbody&gt;&lt;/table&gt;&lt;/div&gt;&lt;/template&gt;
&lt;div class="flextable-shadow-host" id="c9a5f031-0f39-4e58-bc0d-e1acc24cefad"&gt;&lt;/div&gt;
&lt;script&gt;
var dest = document.getElementById("c9a5f031-0f39-4e58-bc0d-e1acc24cefad");
var template = document.getElementById("1492e9d1-55c2-4f56-8fc6-c8d81a74d5b8");
var caption = template.content.querySelector("caption");
if(caption) {
  caption.style.cssText = "display:block;text-align:center;";
  var newcapt = document.createElement("p");
  newcapt.appendChild(caption)
  dest.parentNode.insertBefore(newcapt, dest.previousSibling);
}
var fantome = dest.attachShadow({mode: 'open'});
var templateContent = template.content;
fantome.appendChild(templateContent);
&lt;/script&gt;

---



# Table highlighting

- Use  chunk option `highlight.output` to highlight specific lines of the text output. 
  + For example, `highlight.output = TRUE` means highlighting all lines
  + `highlight.output = c(1, 3)` means highlighting the first and third line.



```
*##                    mpg cyl disp  hp drat    wt  qsec vs am gear carb
## Mazda RX4         21.0   6  160 110 3.90 2.620 16.46  0  1    4    4
*## Mazda RX4 Wag     21.0   6  160 110 3.90 2.875 17.02  0  1    4    4
## Datsun 710        22.8   4  108  93 3.85 2.320 18.61  1  1    4    1
## Hornet 4 Drive    21.4   6  258 110 3.08 3.215 19.44  1  0    3    1
## Hornet Sportabout 18.7   8  360 175 3.15 3.440 17.02  0  0    3    2
## Valiant           18.1   6  225 105 2.76 3.460 20.22  1  0    3    1
```

---

## Visualisation 

Note to selves: 
I think the way [this presentation](https://www.cedricscherer.com/slides/2019-08-28-intro-ggplot-statsizw#20) 
breaks down ggplots line by line is probably the way to go! 

---

## A ggplot code example

- see [extras slide](#references) for alt side-by-side option in twitter feed


.pull-left[

Highlight code lines using #&lt;&lt;


```r
ggplot(mtcars) + 
  aes(mpg, disp) + 
* geom_point() +
* geom_smooth()
```
] 

.pull-right[
&lt;img src="slides_ggplot_files/figure-html/ggplot_code_plot-1.png" width="504" /&gt;
]



---
name: imageslide
background-image: url(https://github.com/appliedepi/epiRhandbook_eng/raw/master/images/epiRhandbook_HexSticker_500x500.png)
background-size: 250px
background-position: 90% 50%


# Including images

.pull-left[
- Text displayed along side an image 
- May need to fiddle with sizes
  + position is %accross and %down 
  + size .... just flip a coin and see what comes out 
  + can also use % for images (see layout chunk just below YAML) 
    + i.e. in layout section up top to adds logos to each page (as per the twitter feed in [extras slide](#references))
- Can also include images with usual Rmarkdown or knitr code (e.g. next slide)
]
---

# Including images 2.0 

![](https://github.com/appliedepi/epiRhandbook_eng/raw/master/images/Epi%20R%20Handbook%20Banner%20Beige%201500x500.png)


---
name: references 

# Xaringan extra &amp; fancy stuff 

- This is a good [tutorial](https://presentable-user2021.netlify.app/) from useR conference.
- You can include fancier code tabs i.e. this [pres](https://xaringan.gallery/examples.html) 
- Theres other fancy stuff in this [gallery](https://xaringan.gallery/examples.html)
- There is tips in this [twitter feed](https://twitter.com/apreshill/status/1085659933238976513)
  + e.g. if you name slides you can link back to them (nb. name needs to be first thing defined on slide)
  + keyboard shortcuts for presenting 
  + better side-by-side code example 
  + title page 
  + logos (have included this)
  + background images 
- Can set theme using [{xaringanthemer}](https://pkg.garrickadenbuie.com/xaringanthemer/articles/xaringanthemer.html) package 
  + seems easier than messing around with css


---


class: center

# Keyboard shortcuts when presenting

Press `h` or `?` to see the possible ninjutsu you can use in remark.js.

![](https://upload.wikimedia.org/wikipedia/commons/7/7e/Mudra-Naruto-KageBunshin.svg)

---

class: center, middle

# Thanks!

Slides created via the R package [**xaringan**](https://github.com/yihui/xaringan).




---

# Some Tips

- The title slide is created automatically by **xaringan**, but it is just another remark.js slide added before your other slides.

    The title slide is set to `class: center, middle, inverse, title-slide` by default. You can change the classes applied to the title slide with the `titleSlideClass` option of `nature` (`title-slide` is always applied).

    ```yaml
    output:
      xaringan::moon_reader:
        nature:
          titleSlideClass: [top, left, inverse]
    ```
    
--

- If you'd like to create your own title slide, disable **xaringan**'s title slide with the `seal = FALSE` option of `moon_reader`.

    ```yaml
    output:
      xaringan::moon_reader:
        seal: false
    ```


---

# Some Tips

- To make slides work offline, you need to download a copy of remark.js in advance, because **xaringan** uses the online version by default (see the help page `?xaringan::moon_reader`).

- You can use `xaringan::summon_remark()` to download the latest or a specified version of remark.js. By default, it is downloaded to `libs/remark-latest.min.js`.

- Then change the `chakra` option in YAML to point to this file, e.g.

    ```yaml
    output:
      xaringan::moon_reader:
        chakra: libs/remark-latest.min.js
    ```

- If you used Google fonts in slides (the default theme uses _Yanone Kaffeesatz_, _Droid Serif_, and _Source Code Pro_), they won't work offline unless you download or install them locally. The Heroku app [google-webfonts-helper](https://google-webfonts-helper.herokuapp.com/fonts) can help you download fonts and generate the necessary CSS.


---

# CSS

Among all options in `xaringan::moon_reader`, the most challenging but perhaps also the most rewarding one is `css`, because it allows you to customize the appearance of your slides using any CSS rules or hacks you know.

You can see the default CSS file [here](https://github.com/yihui/xaringan/blob/master/inst/rmarkdown/templates/xaringan/resources/default.css). You can completely replace it with your own CSS files, or define new rules to override the default. See the help page `?xaringan::moon_reader` for more information.

---

# CSS

For example, suppose you want to change the font for code from the default "Source Code Pro" to "Ubuntu Mono". You can create a CSS file named, say, `ubuntu-mono.css`:

```css
@import url(https://fonts.googleapis.com/css?family=Ubuntu+Mono:400,700,400italic);

.remark-code, .remark-inline-code { font-family: 'Ubuntu Mono'; }
```

Then set the `css` option in the YAML metadata:

```yaml
output:
  xaringan::moon_reader:
    css: ["default", "ubuntu-mono.css"]
```

Here I assume `ubuntu-mono.css` is under the same directory as your Rmd.

See [yihui/xaringan#83](https://github.com/yihui/xaringan/issues/83) for an example of using the [Fira Code](https://github.com/tonsky/FiraCode) font, which supports ligatures in program code.

---

# CSS (with Sass)

**xaringan** also supports Sass support via **rmarkdown**. Suppose you want to use the same color for different elements, e.g., first heading and bold text. You can create a `.scss` file, say `mytheme.scss`, using the [sass](https://sass-lang.com/) syntax with variables:

```scss
$mycolor: #ff0000; 
.remark-slide-content &gt; h1 { color: $mycolor; }
.remark-slide-content strong { color: $mycolor; }
```

Then set the `css` option in the YAML metadata using this file placed under the same directory as your Rmd:

```yaml
output:
  xaringan::moon_reader:
    css: ["default", "mytheme.scss"]
```

This requires **rmarkdown** &gt;= 2.8 and the [**sass**](https://rstudio.github.io/sass/) package. You can learn more about **rmarkdown** and **sass** support in [this blog post](https://blog.rstudio.com/2021/04/15/2021-spring-rmd-news/#sass-and-scss-support-for-html-based-output) and in [**sass** overview vignette](https://rstudio.github.io/sass/articles/sass.html).

---

# Themes

Don't want to learn CSS? Okay, you can use some user-contributed themes. A theme typically consists of two CSS files `foo.css` and `foo-fonts.css`, where `foo` is the theme name. Below are some existing themes:


```
##  [1] "chocolate-fonts"  "chocolate"        "default-fonts"   
##  [4] "default"          "duke-blue"        "fc-fonts"        
##  [7] "fc"               "glasgow_template" "hygge-duke"      
## [10] "hygge"            "ki-fonts"         "ki"              
## [13] "kunoichi"         "lucy-fonts"       "lucy"            
## [16] "metropolis-fonts" "metropolis"       "middlebury-fonts"
## [19] "middlebury"       "nhsr-fonts"       "nhsr"            
## [22] "ninjutsu"         "rladies-fonts"    "rladies"         
## [25] "robot-fonts"      "robot"            "rutgers-fonts"   
## [28] "rutgers"          "shinobi"          "tamu-fonts"      
## [31] "tamu"             "uio-fonts"        "uio"             
## [34] "uo-fonts"         "uo"               "uol-fonts"       
## [37] "uol"              "useR-fonts"       "useR"            
## [40] "uwm-fonts"        "uwm"
```

---

# Themes

To use a theme, you can specify the `css` option as an array of CSS filenames (without the `.css` extensions), e.g.,

```yaml
output:
  xaringan::moon_reader:
    css: [default, metropolis, metropolis-fonts]
```

If you want to contribute a theme to **xaringan**, please read [this blog post](https://yihui.org/en/2017/10/xaringan-themes).








&lt;!-- --- --&gt;
&lt;!-- # Outline --&gt;

&lt;!-- ```{r, eval=FALSE, echo=TRUE} --&gt;
&lt;!-- ggplot(data = this_demonstration)+ --&gt;
&lt;!--   geom_setscene(directory, packages, and data import)+   --&gt;
&lt;!--   geom_fundamentals(building your plot)+   --&gt;
&lt;!--   geom_bar(bar charts)+   --&gt;
&lt;!--   geom_histogram(epidemic curves and demographic pyramids)+   --&gt;
&lt;!--   geom_points(scatter and density plots)+ --&gt;
&lt;!--   labs(dynamics plot captions)+ --&gt;
&lt;!-- ``` --&gt;


&lt;!-- We've prioritized topics that might be more complex, leaving simple plots for your reading in the Handbook   --&gt;


&lt;!-- --- --&gt;
&lt;!-- # Outline --&gt;

&lt;!-- ```{r, eval=FALSE, echo=TRUE} --&gt;
&lt;!-- ggplot(data = this_demonstration)+ --&gt;
&lt;!--   Setting the scene (directory, packages, and data import)+   --&gt;
&lt;!--   Fundamentals (building your plot)+   --&gt;
&lt;!--   Bars (bar and column charts, data structure)+   --&gt;
&lt;!--   Histograms(epidemic curves and demographic pyramids)+   --&gt;
&lt;!--   Points(scatter and density plots)+ --&gt;
&lt;!--   Label tips (dynamics plot captions)+ --&gt;
&lt;!-- ``` --&gt;


&lt;!-- We've prioritized topics that might be more complex, leaving simple plots for your reading in the Handbook   --&gt;

    </textarea>
<style data-target="print-only">@media screen {.remark-slide-container{display:block;}.remark-slide-scaler{box-shadow:none;}}</style>
<script src="https://remarkjs.com/downloads/remark-latest.min.js"></script>
<script>var slideshow = remark.create({
"highlightStyle": "github",
"highlightLines": true,
"countIncrementalSlides": false
});
if (window.HTMLWidgets) slideshow.on('afterShowSlide', function (slide) {
  window.dispatchEvent(new Event('resize'));
});
(function(d) {
  var s = d.createElement("style"), r = d.querySelector(".remark-slide-scaler");
  if (!r) return;
  s.type = "text/css"; s.innerHTML = "@page {size: " + r.style.width + " " + r.style.height +"; }";
  d.head.appendChild(s);
})(document);

(function(d) {
  var el = d.getElementsByClassName("remark-slides-area");
  if (!el) return;
  var slide, slides = slideshow.getSlides(), els = el[0].children;
  for (var i = 1; i < slides.length; i++) {
    slide = slides[i];
    if (slide.properties.continued === "true" || slide.properties.count === "false") {
      els[i - 1].className += ' has-continuation';
    }
  }
  var s = d.createElement("style");
  s.type = "text/css"; s.innerHTML = "@media print { .has-continuation { display: none; } }";
  d.head.appendChild(s);
})(document);
// delete the temporary CSS (for displaying all slides initially) when the user
// starts to view slides
(function() {
  var deleted = false;
  slideshow.on('beforeShowSlide', function(slide) {
    if (deleted) return;
    var sheets = document.styleSheets, node;
    for (var i = 0; i < sheets.length; i++) {
      node = sheets[i].ownerNode;
      if (node.dataset["target"] !== "print-only") continue;
      node.parentNode.removeChild(node);
    }
    deleted = true;
  });
})();
(function() {
  "use strict"
  // Replace <script> tags in slides area to make them executable
  var scripts = document.querySelectorAll(
    '.remark-slides-area .remark-slide-container script'
  );
  if (!scripts.length) return;
  for (var i = 0; i < scripts.length; i++) {
    var s = document.createElement('script');
    var code = document.createTextNode(scripts[i].textContent);
    s.appendChild(code);
    var scriptAttrs = scripts[i].attributes;
    for (var j = 0; j < scriptAttrs.length; j++) {
      s.setAttribute(scriptAttrs[j].name, scriptAttrs[j].value);
    }
    scripts[i].parentElement.replaceChild(s, scripts[i]);
  }
})();
(function() {
  var links = document.getElementsByTagName('a');
  for (var i = 0; i < links.length; i++) {
    if (/^(https?:)?\/\//.test(links[i].getAttribute('href'))) {
      links[i].target = '_blank';
    }
  }
})();
// adds .remark-code-has-line-highlighted class to <pre> parent elements
// of code chunks containing highlighted lines with class .remark-code-line-highlighted
(function(d) {
  const hlines = d.querySelectorAll('.remark-code-line-highlighted');
  const preParents = [];
  const findPreParent = function(line, p = 0) {
    if (p > 1) return null; // traverse up no further than grandparent
    const el = line.parentElement;
    return el.tagName === "PRE" ? el : findPreParent(el, ++p);
  };

  for (let line of hlines) {
    let pre = findPreParent(line);
    if (pre && !preParents.includes(pre)) preParents.push(pre);
  }
  preParents.forEach(p => p.classList.add("remark-code-has-line-highlighted"));
})(document);</script>

<script>
slideshow._releaseMath = function(el) {
  var i, text, code, codes = el.getElementsByTagName('code');
  for (i = 0; i < codes.length;) {
    code = codes[i];
    if (code.parentNode.tagName !== 'PRE' && code.childElementCount === 0) {
      text = code.textContent;
      if (/^\\\((.|\s)+\\\)$/.test(text) || /^\\\[(.|\s)+\\\]$/.test(text) ||
          /^\$\$(.|\s)+\$\$$/.test(text) ||
          /^\\begin\{([^}]+)\}(.|\s)+\\end\{[^}]+\}$/.test(text)) {
        code.outerHTML = code.innerHTML;  // remove <code></code>
        continue;
      }
    }
    i++;
  }
};
slideshow._releaseMath(document);
</script>
<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
(function () {
  var script = document.createElement('script');
  script.type = 'text/javascript';
  script.src  = 'https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-MML-AM_CHTML';
  if (location.protocol !== 'file:' && /^https?:/.test(script.src))
    script.src  = script.src.replace(/^https?:/, '');
  document.getElementsByTagName('head')[0].appendChild(script);
})();
</script>
  </body>
</html>
